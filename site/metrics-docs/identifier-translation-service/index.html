
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="http://metrics.operas-eu.org/metrics-docs/identifier-translation-service/">
      
      
        <link rel="prev" href="../google-books/">
      
      
        <link rel="next" href="../irus-uk/">
      
      
      <link rel="icon" href="/images/icons/Operas-icon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.7">
    
    
      
        <title>Identifier Translation Service - Metrics Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.8608ea7d.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/css.css?v=1.0">
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css?v=1.0">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    
    
    <script src="../../js/matomo-tracking.js"></script>

  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="purple">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#identifier-translation-service" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Metrics Documentation" class="md-header__button md-logo" aria-label="Metrics Documentation" data-md-component="logo">
      
  <img src="/images/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Metrics Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Identifier Translation Service
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="purple"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="white" data-md-color-accent="purple"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../measures/" class="md-tabs__link">
        
  
    
  
  <i class="fa-solid fa-chart-line"></i>&nbsp;&nbsp;Measures

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../principles/" class="md-tabs__link">
        
  
    
  
  <i class="fa-sharp-duotone fa-solid fa-heart"></i>&nbsp;&nbsp;Our Principles

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../getting-started/" class="md-tabs__link">
          
  
  <i class="fa-solid fa-book-open"></i>&nbsp;&nbsp;Documentation

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Metrics Documentation" class="md-nav__button md-logo" aria-label="Metrics Documentation" data-md-component="logo">
      
  <img src="/images/logo.png" alt="logo">

    </a>
    Metrics Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../measures/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    <i class="fa-solid fa-chart-line"></i>&nbsp;&nbsp;Measures
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../principles/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    <i class="fa-sharp-duotone fa-solid fa-heart"></i>&nbsp;&nbsp;Our Principles
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    <i class="fa-solid fa-book-open"></i>&nbsp;&nbsp;Documentation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            <i class="fa-solid fa-book-open"></i>&nbsp;&nbsp;Documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../altmetrics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Altmetrics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../annotation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Annotation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../countries-api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Countries API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../crossref-citedby/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Crossref Cited-by
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OPERAS Metrics Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../drivers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Drivers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../onboarding-users/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Onboarding Users
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../onboarding-sending-metrics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Onboarding Metrics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../metrics-api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Metrics API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_11" checked>
        
          
          <label class="md-nav__link" for="__nav_3_11" id="__nav_3_11_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Drivers & Plugins
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_11_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_11">
            <span class="md-nav__icon md-icon"></span>
            Drivers & Plugins
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../access-logs-local/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Access Logs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../google-analytics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Google Analytics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../google-books/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Google Books
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Identifier Translation Service
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Identifier Translation Service
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#setup" class="md-nav__link">
    <span class="md-ellipsis">
      Setup
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#authentication" class="md-nav__link">
    <span class="md-ellipsis">
      Authentication
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment-variables" class="md-nav__link">
    <span class="md-ellipsis">
      Environment variables
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running-with-docker-compose" class="md-nav__link">
    <span class="md-ellipsis">
      Running with docker-compose
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api-structure" class="md-nav__link">
    <span class="md-ellipsis">
      API Structure
    </span>
  </a>
  
    <nav class="md-nav" aria-label="API Structure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#publication-identifiers-as-uris" class="md-nav__link">
    <span class="md-ellipsis">
      Publication identifiers as URIs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Publication identifiers as URIs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-canonical-flag" class="md-nav__link">
    <span class="md-ellipsis">
      The canonical flag
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api-routes" class="md-nav__link">
    <span class="md-ellipsis">
      API routes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#translate-queries" class="md-nav__link">
    <span class="md-ellipsis">
      /translate Queries
    </span>
  </a>
  
    <nav class="md-nav" aria-label="/translate Queries">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#translation-by-uri" class="md-nav__link">
    <span class="md-ellipsis">
      Translation by URI
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#translation-by-title" class="md-nav__link">
    <span class="md-ellipsis">
      Translation by title
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#translation-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Translation parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#translation-example" class="md-nav__link">
    <span class="md-ellipsis">
      Translation example
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#works-queries" class="md-nav__link">
    <span class="md-ellipsis">
      /works Queries
    </span>
  </a>
  
    <nav class="md-nav" aria-label="/works Queries">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#get-works-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      GET /works parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-works-example" class="md-nav__link">
    <span class="md-ellipsis">
      GET /works example
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-works-data" class="md-nav__link">
    <span class="md-ellipsis">
      POST /works data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-works-example" class="md-nav__link">
    <span class="md-ellipsis">
      POST /works example
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete-works-data" class="md-nav__link">
    <span class="md-ellipsis">
      DELETE /works data
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#more" class="md-nav__link">
    <span class="md-ellipsis">
      More
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crosref-extension" class="md-nav__link">
    <span class="md-ellipsis">
      Crosref extension
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#populating-the-database" class="md-nav__link">
    <span class="md-ellipsis">
      Populating the database
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../irus-uk/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IRUS-UK
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../jstor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JSTOR
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../matomo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Matomo
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../onboarding-sending-metrics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Onboarding Metrics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../onboarding-users/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Onboarding Users
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../server-access-logs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Server Access Logs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tokens-api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tokens API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../unglueit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Unglue.it
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../figshare/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Figshare
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../widget/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Widget
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../publishers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Publishers
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="identifier-translation-service">Identifier Translation Service</h1>
<p>The Identifier Translation Service is a JSON REST API to a <a href="https://github.com/hirmeos/identifiers_db" title="Identifiers database">database of publication URIs</a>. The translation service maps works (publications) to URIs (e.g. info:doi:10.11647/obp.0001, urn:isbn:9781906924010, https://www.openbookpublishers.com/product/3) to allow converting from one identifier to another.</p>
<h2 id="setup">Setup</h2>
<h3 id="authentication">Authentication</h3>
<p>If you are planning to expose the API to the internet you may protect it using JWT. You must set up a tokens API such as <a href="https://github.com/hirmeos/tokens_api" title="Tokens API">hirmeos/tokens_api</a> and share the secret key with this service via the <code>SECRET_KEY</code> env variable, the translation service will then expect a token in the <code>Authorization</code> header of each request it receives and will check whether it was generated with the secret key.</p>
<h3 id="environment-variables">Environment variables</h3>
<p>The following environment variables may be set. If you're running the service using docker-compose, you may use different files to separate API-specific variables from database's. All variables must be set.</p>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>API_DEBUG</code></td>
<td>Boolean flag to output debugging lines to the console.</td>
</tr>
<tr>
<td><code>JWT_DISABLED</code></td>
<td>Boolean flag to toggle using JWT authentication. Should only be set to <code>False</code> in a local network or developing environment.</td>
</tr>
<tr>
<td><code>SECRET_KEY</code></td>
<td>An up to 255 bytes random key, shared with a <a href="https://github.com/hirmeos/tokens_api" title="Tokens API">JWT API</a>.</td>
</tr>
<tr>
<td><code>IDENTIFIERSDB_HOST</code></td>
<td>The address of the host where the identifiers database runs.</td>
</tr>
<tr>
<td><code>IDENTIFIERSDB_DB</code></td>
<td>The name of the identifiers database.</td>
</tr>
<tr>
<td><code>IDENTIFIERSDB_USER</code></td>
<td>The user name of the identifiers database.</td>
</tr>
<tr>
<td><code>IDENTIFIERSDB_PASS</code></td>
<td>The password of the identifiers database.</td>
</tr>
<tr>
<td><code>ALLOW_ORIGIN</code></td>
<td>String with a domain name to be included in CORS headers.</td>
</tr>
</tbody>
</table>
<h3 id="running-with-docker-compose">Running with docker-compose</h3>
<p>The easiest way to get a fully featured and functional setup is using a docker-compose file, since the API depends on the <a href="https://github.com/hirmeos/identifiers_db" title="Identifiers database">hirmeos/identifiers_db</a> database.</p>
<pre><code>version: &quot;3.5&quot;

services:
  identifiertranslatorservice_db:
    image: openbookpublishers/identifiers_db:1
    container_name: &quot;identifiertranslatorservice_db&quot;
    restart: unless-stopped
    volumes:
      - db:/var/lib/postgresql/data
    env_file:
      - ./config/db.env

  identifiertranslatorservice_api:
    image: openbookpublishers/identifier_translation_service:1
    container_name: &quot;identifiertranslatorservice_api&quot;
    restart: unless-stopped
    ports:
      - 8080:8080
    environment:
      - IDENTIFIERSDB_HOST=identifiertranslatorservice_db
    env_file:
      - ./config/api.env
      - ./config/db.env
    depends_on:
      - identifiertranslatorservice_db

volumes:
  db:
</code></pre>
<p>Notes:
- The example uses the docker images already built and used by Open Book Publishers. You may use the provided docker files to build your own, instead.
- You may of course use whatever port you like, and/or use a proxy server (e.g. nginx) to handle the API endpoint.
- The <code>db</code> volume ensure the contents of the database persist when restarting/deleting the container.
- In this example we use two sets of configuration files, one with database credentials shared with both containers, the other one with API configuration only available to the API container. You may use a single file with all environment variables.
- For development purposes you can disable the JWT check applying this line under the environment section: <code>- JWT_DISABLED=true</code>.</p>
<h2 id="api-structure">API Structure</h2>
<h3 id="publication-identifiers-as-uris">Publication identifiers as URIs</h3>
<p>The translation service stores all work (publication) identifiers as URIs, therefore when querying/populating the database you must use the relevant <a href="https://www.iana.org/assignments/uri-schemes/uri-schemes.xhtml" title="URI Schemes">URI scheme</a>.</p>
<table>
<thead>
<tr>
<th>Identifier</th>
<th>URI Scheme</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td>ISBN</td>
<td>urn:isbn</td>
<td>urn:isbn:9781906924003</td>
</tr>
<tr>
<td>DOI</td>
<td>info:doi</td>
<td>info:doi:10.11647/obp.0001</td>
</tr>
<tr>
<td>ISSN</td>
<td>urn:issn</td>
<td>urn:issn:20542445</td>
</tr>
<tr>
<td>UUID</td>
<td>urn:uuid</td>
<td>urn:uuid:463b4279-4e8d-47f8-a133-ad8ce7c4f86c</td>
</tr>
<tr>
<td>Handle</td>
<td>info:hdl</td>
<td>info:hdl:10670/1.di2dtn</td>
</tr>
<tr>
<td>URL</td>
<td>http</td>
<td>http://www.openbookpublishers.com/product/3</td>
</tr>
<tr>
<td>URL</td>
<td>https</td>
<td>https://www.openbookpublishers.com/product/3</td>
</tr>
</tbody>
</table>
<h4 id="the-canonical-flag">The canonical flag</h4>
<p>When multiple identifiers of the same scheme are associated with the same work, <strong>you may set one and only one canonical URI per URI scheme and work</strong>, which will be the returned value when the <code>strict</code> flag is used.</p>
<p>The <code>/translate</code> path attempts to retrieve a unique identifier of the chosen URI scheme (e.g. translating from a urn:isbn to a info:doi), if more than one identifier of the same URI scheme is found the API will complain that it is not able to translate properly. The canonical flag makes sure that in such a case the API is able to translate to the desired canonical URI of that particular scheme.</p>
<p>A work can have at most one canonical URI of each URI scheme (e.g. one canonical URL, one canonical ISBN, one canonical DOI, etc.).</p>
<h3 id="api-routes">API routes</h3>
<p>The following methods are allowed:</p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Route</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>GET</code></td>
<td><code>/translate</code></td>
<td>Takes a <code>uri</code> as parameter and returns all identifiers associated with it.</td>
</tr>
<tr>
<td><code>GET</code></td>
<td><code>/works</code></td>
<td>Return information about stored publications.</td>
</tr>
<tr>
<td><code>POST</code></td>
<td><code>/works</code></td>
<td>Store a publication and associated URIs in the database.</td>
</tr>
<tr>
<td><code>DELETE</code></td>
<td><code>/works</code></td>
<td>Delete a publication from the database.</td>
</tr>
<tr>
<td><code>POST</code></td>
<td><code>/titles</code></td>
<td>Add a new title to an existing publication.</td>
</tr>
<tr>
<td><code>DELETE</code></td>
<td><code>/titles</code></td>
<td>Remove a title from its publication.</td>
</tr>
<tr>
<td><code>POST</code></td>
<td><code>/uris</code></td>
<td>Add a new URI to an existing publication.</td>
</tr>
<tr>
<td><code>DELETE</code></td>
<td><code>/uris</code></td>
<td>Remove a URI from its publication.</td>
</tr>
<tr>
<td><code>GET</code></td>
<td><code>/work_types</code></td>
<td>Retrieve the full list of publication types.</td>
</tr>
<tr>
<td><code>POST</code></td>
<td><code>/work_relations</code></td>
<td>Store a relationship between two publications (e.g. book -&gt; chapter)</td>
</tr>
</tbody>
</table>
<h3 id="translate-queries"><code>/translate</code> Queries</h3>
<p>This is the most important method in the API since it serves the purpose of translating a given identifier to the desired match (e.g. translate an ISBN or a URL to a DOI).</p>
<h4 id="translation-by-uri">Translation by URI</h4>
<p>Translation by URI (identifier) will query the database searching for other URIs associated with the input. To translate from one uri_scheme to another (e.g. input ISBN to retrieve a DOI) you will need to set a filter of type <code>uri_scheme</code> (see below).</p>
<h4 id="translation-by-title">Translation by title</h4>
<p>Translation by title uses the Levenshtein distance between the input and the stored titles in the database, and outputs a list of candidates matching the given title along with a score (where 0 is a perfect match). When the <code>strict</code> flag is set, the API will attempt to return only the fittest candidate for the query.</p>
<h4 id="translation-parameters">Translation parameters</h4>
<p>You may use this method to either translate a <code>uri</code> or a <code>title</code>, hence one and only one of either parameters is compulsory.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>uri</td>
<td>The URI you want to translate</td>
</tr>
<tr>
<td>title</td>
<td>A URL-encoded title to search for.</td>
</tr>
<tr>
<td>filter</td>
<td>A concatenation of filters of type <code>work_type</code>, <code>uri_scheme</code>, <code>canonical</code> allows refining the query.</td>
</tr>
<tr>
<td>strict</td>
<td>Defaults to <code>false</code>. When set to <code>true</code> it enforces the return of a single identifier.</td>
</tr>
</tbody>
</table>
<h4 id="translation-example">Translation example</h4>
<p><code>/translate?uri=urn:isbn:9781906924652&amp;strict=true&amp;filter=work_type:monograph,work_type:book,uri_scheme:info:doi</code> will retrieve a unique book DOI for the given ISBN; if the <code>work_type</code> wasn't specified, the query would fail to retrieve a single DOI, since it would also include chapter DOIs which are associated with that same ISBN.</p>
<pre><code>{
  &quot;code&quot;: 200,
  &quot;status&quot;: &quot;ok&quot;,
  &quot;data&quot;: [
    {
      &quot;URI&quot;: &quot;info:doi:10.11647/obp.0001&quot;,
      &quot;URI_parts&quot;: {
        &quot;scheme&quot;: &quot;info:doi&quot;,
        &quot;value&quot;: &quot;10.11647/obp.0001&quot;
      },
      &quot;canonical&quot;: true,
      &quot;score&quot;: 0,
      &quot;work&quot;: {
        &quot;type&quot;: &quot;monograph&quot;,
        &quot;URI&quot;: [],
        &quot;UUID&quot;: &quot;463b4279-4e8d-47f8-a133-ad8ce7c4f86c&quot;,
        &quot;title&quot;: [
          &quot;That Greece Might Still Be Free: The Philhellenes in the War of Independence&quot;
        ]
      }
    }
  ],
  &quot;count&quot;: 1
}
</code></pre>
<h3 id="works-queries"><code>/works</code> Queries</h3>
<p>This route is used to either retrieve full work records, or to populate the database with new works.</p>
<h4 id="get-works-parameters"><code>GET /works</code> parameters</h4>
<p>You may use this method to either translate a <code>uri</code> or a <code>title</code>, hence one and only one of either parameters is compulsory.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>uuid</td>
<td>The <code>work_id</code> UUID of a particular work. If provided it will retrieve a single publication, if not set it will retrieve all publications.</td>
</tr>
<tr>
<td>filter</td>
<td>A concatenation of filters of type <code>work_type</code>, <code>uri_scheme</code>, <code>canonical</code> allows refining the query.</td>
</tr>
</tbody>
</table>
<h4 id="get-works-example"><code>GET /works</code> example</h4>
<p><code>/works?filter=work_type:monograph,work_type:book,uri_scheme:info:doi,canonical:true</code> will retrieve the canonical DOI of all books and monographs.</p>
<pre><code>{
  &quot;code&quot;: 200,
  &quot;status&quot;: &quot;ok&quot;,
  &quot;count&quot;: 145,
  &quot;data&quot;: [
    {
      &quot;type&quot;: &quot;monograph&quot;,
      &quot;URI&quot;: [
        {
          &quot;URI&quot;: &quot;info:doi:10.11647/obp.0033&quot;,
          &quot;URI_parts&quot;: {
            &quot;scheme&quot;: &quot;info:doi&quot;,
            &quot;value&quot;: &quot;10.11647/obp.0033&quot;
          },
          &quot;canonical&quot;: true,
          &quot;score&quot;: 0
        }
      ],
      &quot;UUID&quot;: &quot;0034efd8-be0b-4527-b0e0-bad1faff3c2f&quot;,
      &quot;title&quot;: [
        &quot;Storytelling in Northern Zambia: Theory, Method, Practice and Other Necessary Fictions&quot;,
        &quot;Storytelling in Northern Zambia. Theory, Method, Practice and Other Necessary Fictions&quot;
      ]
    },
    ...
  ]
}
</code></pre>
<h4 id="post-works-data"><code>POST /works</code> data</h4>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>title</td>
<td>string or array of strings</td>
<td>One or more titles that represent the publication.</td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>The publication type of the work (e.g. 'book', 'book-chapter').</td>
</tr>
<tr>
<td>uri</td>
<td>object or array of objects</td>
<td>Each URI object must have a <code>uri</code> (string) and a <code>canonical</code> (boolean) attributes.</td>
</tr>
<tr>
<td>parent</td>
<td>string or array of strings</td>
<td>Optional. You may provide the UUID of an existing work that is a parent of this one.</td>
</tr>
<tr>
<td>child</td>
<td>string or array of strings</td>
<td>Optional. You may provide the UUID of an existing work that is a child of this one.</td>
</tr>
</tbody>
</table>
<h4 id="post-works-example"><code>POST /works</code> example</h4>
<p>In this example we use a fictional parent UUID, which could be one of a book series for example - and two child UUIDs, which could represent two chapters in the book.</p>
<pre><code>{
  &quot;type&quot;: &quot;monograph&quot;,
  &quot;title&quot;: [
    &quot;That Greece Might Still Be Free: The Philhellenes in the War of Independence&quot;,
    &quot;That Greece Might Still Be Free&quot;
  ],
  &quot;uri&quot;: [
    {
      &quot;uri&quot;: &quot;info:doi:10.11647/obp.0001&quot;,
      &quot;canonical&quot;: true
    }, {
      &quot;uri&quot;: &quot;urn:isbn:9781906924003&quot;,
      &quot;canonical&quot;: true
    }, {
      &quot;uri&quot;: &quot;urn:isbn:9781906924027&quot;,
      &quot;canonical&quot;: false
    }, {
      &quot;uri&quot;: &quot;https://www.openbookpublishers.com/product/3&quot;,
      &quot;canonical&quot;: false
    }
  }],
  &quot;parent&quot;: &quot;0a0f1877-d3da-4a84-bce6-e388b5e722d5&quot;,
  &quot;child&quot;: [
    &quot;b23bfb0f-dc1b-45bd-9f31-2955dcae9b0d&quot;,
    &quot;a5175483-8d03-4d82-9522-a039fb8873aa&quot;
  ]
}
</code></pre>
<h4 id="delete-works-data"><code>DELETE /works</code> data</h4>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>UUID</td>
<td>string</td>
<td>The work_id of the work to delete.</td>
</tr>
</tbody>
</table>
<h3 id="more">More</h3>
<p>Check some more <a href="https://docs.google.com/document/d/1aEwV_6CF8ha5M5yRu6FsYWQBDbTMeazWDIj1h3kLSec/edit" title="Example queries">example queries</a>.</p>
<h3 id="crosref-extension">Crosref extension</h3>
<p>The main purpose of this service is to store as many URIs per publication as possible, and it's unlikely that the user of this software will be aware of all of them. For this reason you may set up <a href="https://github.com/hirmeos/crossref_uri_import" title="Crossref URI import">hirmeos/crossref_uri_import</a> to periodically query Crossref's API with your DOIs and populate the translation service with potential new data (e.g. multiple DOIs assigned to the same publication, multiple resolution URLs).</p>
<h2 id="populating-the-database">Populating the database</h2>
<p>You may write your own version of <a href="https://github.com/OpenBookPublishers/obp_product_import" title="OBP Book import">OpenBookPublishers/obp_product_import</a> to populate the translation service with your existing data. Or you can use this script to add individual URIs to an existing publication: <a href="https://github.com/OpenBookPublishers/obp_uri_import" title="OBP URI import">OpenBookPublishers/obp_uri_import</a></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      <a href='https://operas-eu.org/' target='_blank'><img src='/images/logo.png' width='200'></a> <p>Unless otherwise indicated, all materials created by the Hirmeos Project are licensed under a <br><a href='https://creativecommons.org/licenses/by/4.0/'>Creative Commons Attribution 4.0 International License</a>. Privacy policy - <a href='https://metrics.operas-eu.org/acceptable-use-policy'>Acceptable Use Policy and Conditions of Use</a></p> 
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/hirmeos" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.annotate", "navigation.tabs", "navigation.top", "toc.integrate", "search.suggest", "search.highlight", "search.share", "navigation.tracking"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": "random"}</script>
    
    
      <script src="../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
        <script src="../../js/publishers.js?v=1.0.1"></script>
      
        <script src="../../js/service-worker.js"></script>
      
    
  </body>
</html>